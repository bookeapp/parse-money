"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.symbols = void 0;
exports.symbols = {
    AED: ["د.إ", "DH", "AED"],
    AFN: ["؋", "AFN"],
    ALL: ["L", "ALL"],
    AMD: ["֏", "AMD"],
    ANG: ["Ƒ", "ANG"],
    AOA: ["KZ", "AOA"],
    ARS: ["AR$", "ARS"],
    AUD: ["A$", "AU$", "AUD"],
    AWG: ["AFL", "AWG"],
    AZN: ["₼", "AZN"],
    BAM: ["KM", "BAM"],
    BBD: ["BDS$", "BBD"],
    BDT: ["৳", "TAKA", "BDT"],
    BGN: ["ЛВ", "BGN"],
    BHD: ["ب.د", "BD", "BHD"],
    BIF: ["FBU", "BIF"],
    BMD: ["BD$", "BMD"],
    BND: ["BND"],
    BOB: ["BOB"],
    BRL: ["R$", "BRL"],
    BSD: ["B$", "BSD"],
    BTN: ["NU", "BTN"],
    BWP: ["P", "BWP"],
    BYN: ["BR", "BYN"],
    BZD: ["BZ$", "BZD"],
    CAD: ["C$", "CA$", "CAD"],
    CDF: ["FC", "CDF"],
    CHF: ["FR", "CHF"],
    CLP: ["CLP$", "CLP"],
    CNY: ["¥", "圓", "CNY"],
    COP: ["COL$", "COP"],
    CRC: ["₡", "CRC"],
    CUP: ["$MN", "CUP"],
    CVE: ["ESC", "CVE"],
    CZK: ["KČ", "CZK"],
    DJF: ["FDJ", "DJF"],
    DKK: ["KR", "DKK"],
    DOP: ["RD$", "DOP"],
    DZD: ["د.ج", "DA", "DZD"],
    EGP: ["E£", "EGP"],
    ERN: ["NFK", "ERN"],
    ETB: ["BR", "ETB"],
    EUR: ["€", "EURO", "EUR"],
    FJD: ["FJ$", "FJD"],
    FKP: ["FK£", "FKP"],
    GBP: ["£", "GBP"],
    GEL: ["₾", "GEL"],
    GGP: ["£", "GGP"],
    GHS: ["GH₵", "GHS"],
    GIP: ["£", "GIP"],
    GMD: ["D", "GMD"],
    GNF: ["FG", "GNF"],
    GTQ: ["Q", "GTQ"],
    GYD: ["GY$", "GYD"],
    HKD: ["HK$", "HKD"],
    HNL: ["L", "HNL"],
    HUF: ["FT", "HUF"],
    IDR: ["RP", "IDR"],
    ILS: ["₪", "NIS", "ILS"],
    IMP: ["£", "IMP"],
    INR: ["₹", "RS", "RP", "INR"],
    IQD: ["ع.د", "IQD"],
    IRR: ["﷼", "IRR"],
    ISK: ["KR", "ISK"],
    JEP: ["£", "JEP"],
    JMD: ["J$", "JMD"],
    JOD: ["د.ا", "JD", "JOD"],
    JPY: ["円", "JPY"],
    KES: ["KSH", "KES"],
    KGS: ["СОМ", "KGS"],
    KHR: ["៛", "KHR"],
    KMF: ["CF", "KMF"],
    KPW: ["₩", "KPW"],
    KRW: ["₩", "KRW"],
    KWD: ["د.ك", "KD", "KWD"],
    KYD: ["CI$", "KYD"],
    KZT: ["₸", "KZT"],
    LAK: ["₭", "LAK"],
    LBP: ["ل.ل", "L£", "LBP"],
    LKR: ["RS", "LKR"],
    LRD: ["L$", "LRD"],
    LSL: ["L", "LSL"],
    LYD: ["ل.د", "LYD"],
    MAD: ["د.م", "MAD"],
    MDL: ["L", "MDL"],
    MGA: ["AR", "MGA"],
    MKD: ["ДЕН", "MKD"],
    MMK: ["K", "MMK"],
    MNT: ["₮", "MNT"],
    MOP: ["MOP$", "MOP"],
    MRU: ["UM", "MRU"],
    MUR: ["RS", "MUR"],
    MVR: ["RF", "MVR"],
    MWK: ["MK", "MWK"],
    MXN: ["MX$", "MXN"],
    MYR: ["RM", "MYR"],
    MZN: ["MT", "MZN"],
    NAD: ["N$", "NAD"],
    NGN: ["₦", "NGN"],
    NIO: ["C$", "NIO"],
    NOK: ["KR", "NOK"],
    NPR: ["RS", "NPR"],
    NZD: ["NZ$", "NZD"],
    OMR: ["ر.ع", "﷼", "R.O", "OMR"],
    PEN: ["S/", "PEN"],
    PGK: ["K", "PGK"],
    PHP: ["₱", "PHP"],
    PKR: ["RS", "PKR"],
    PLN: ["ZŁ", "PLN"],
    PYG: ["₲", "PYG"],
    QAR: ["ر.ق", "QR", "QAR"],
    RON: ["LEI", "RON"],
    RSD: ["ДИН", "RSD"],
    RUB: ["₽", "РУБ", "RUB"],
    RWF: ["FRW", "RWF"],
    SAR: ["ر.س", "SR", "SAR"],
    SBD: ["SI$", "SBD"],
    SCR: ["SR", "SCR"],
    SDG: ["ج.س", "SDG"],
    SEK: ["KR", "SEK"],
    SGD: ["S$", "SGD"],
    SHP: ["£", "SHP"],
    SLL: ["LE", "SLL"],
    SOS: ["SH", "SOS"],
    SRD: ["SR$", "SRD"],
    SSP: ["£", "SSP"],
    STN: ["DB", "STN"],
    SYP: ["£S", "SYP"],
    SZL: ["L", "SZL"],
    THB: ["฿", "THB"],
    TJS: ["SM", "TJS"],
    TMT: ["M", "TMT"],
    TND: ["د.ت", "DT", "TND"],
    TOP: ["T$", "TOP"],
    TRY: ["₺", "TRY"],
    TTD: ["TT$", "TTD"],
    TWD: ["NT$", "TWD"],
    TZS: ["SH", "TZS"],
    UAH: ["₴", "UAH"],
    UGX: ["USH", "UGX"],
    USD: ["$", "US$", "US DOLLARS", "USD"],
    UYU: ["$U", "UYU"],
    UZS: ["СУМ", "UZS"],
    VES: ["BS", "VES"],
    VND: ["₫", "VND"],
    VUV: ["VT", "VUV"],
    WST: ["WS$", "WST"],
    XAF: ["FCFA", "XAF"],
    XCD: ["EC$", "XCD"],
    XOF: ["CFA", "XOF"],
    XPF: ["₣", "XPF"],
    YER: ["﷼", "YRL", "YRLS", "YER"],
    ZAR: ["R", "ZAR"],
    ZMW: ["K", "ZK", "ZMW"],
    ZWG: ["ZIG", "ZWG"]
};
var KWD = "KWD";
var escapeStringRegExp = function (string) {
    if (typeof string !== 'string') {
        throw new TypeError('Expected a string');
    }
    return string
        .replace(/[|\\{}()[\]^$+*?.]/g, '\\$&')
        .replace(/-/g, '\\x2d');
};
var parseMoney = function (text) {
    var output = null;
    var currenciesFound = [];
    Object.keys(exports.symbols).forEach(function (currency) {
        exports.symbols[currency].find(function (symbol) {
            var matchFound = text.match(new RegExp(escapeStringRegExp(symbol) + "\\.?", "i"));
            if (matchFound) {
                currenciesFound.push({ currency: currency, index: matchFound.index || 0, match: matchFound[0] });
            }
        });
    });
    var index = 0;
    var currency = null;
    if (currenciesFound.length >= 1) {
        currenciesFound = currenciesFound.sort(function (a, b) {
            return b.match.length - a.match.length;
        });
        currency = currenciesFound[0].currency;
        index = currenciesFound[0].index;
    }
    var start = Math.max(0, index - 40);
    var end = index + 40;
    var slice = text.substr(start, end);
    slice = slice.replace(/[^\d|^\.|^,|^-]/g, "");
    slice = slice.replace(/(?!^)-/g, "");
    slice = slice.replace(/(,|\.)*$/, "");
    while (slice.charAt(0) === "." || slice.charAt(0) === ",") {
        slice = slice.substr(1);
    }
    if (!slice.length)
        return null;
    var dotCount = slice.split(".").length - 1;
    var commaCount = slice.split(",").length - 1;
    var amount = 0;
    if (dotCount === 0 && commaCount === 0) {
    }
    else if (commaCount > 1 && dotCount <= 1) {
        slice = slice.split(",").join("");
    }
    else if (dotCount > 1 && commaCount <= 1) {
        slice = slice.split(".").join("");
        slice = slice.split(",").join(".");
    }
    else if (dotCount > 0 && commaCount > 0) {
        if (slice.indexOf(".") > slice.indexOf(",")) {
            slice = slice.split(",").join("");
        }
        else {
            slice = slice.split(".").join("");
            slice = slice.split(",").join(".");
        }
    }
    else if (dotCount === 1 && commaCount === 0) {
        var segments = slice.split(".");
        var second = segments[1];
        if (second.length === 3 && currency !== KWD) {
            slice = slice.replace(".", "");
        }
        else {
        }
    }
    else {
        var segments = slice.split(",");
        var second = segments[1];
        if (second.length === 3) {
            slice = slice.replace(",", "");
        }
        else {
            slice = slice.replace(",", ".");
        }
    }
    amount = parseFloat(slice);
    output = {
        amount: amount,
        currency: currency,
    };
    return output;
};
exports.default = parseMoney;
